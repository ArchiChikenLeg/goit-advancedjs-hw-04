{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '53279240-6e40a1d36b66aedd6bbd928de';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n/**\n * Функция для поиска изображений по ключевому слову\n * @param {string} query - слово для поиска\n * @returns {Promise<Object>} - объект с массивом найденных изображений\n */\nexport const searchImages = async (query) => {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n  });\n\n  try {\n    const response = await fetch(`${BASE_URL}?${params}`);\n\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = null;\n\n/**\n * Создает HTML разметку для карточки изображения\n * @param {Object} image - объект с данными изображения\n * @returns {string} - HTML разметка карточки\n */\nconst createImageCard = (image) => {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = image;\n\n  return `\n    <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${webformatURL}\"\n          alt=\"${tags}\"\n          loading=\"lazy\"\n        />\n      </a>\n      <div class=\"image-info\">\n        <div class=\"info-item\">\n          <span class=\"info-label\">Likes</span>\n          <span class=\"info-value\">${likes}</span>\n        </div>\n        <div class=\"info-item\">\n          <span class=\"info-label\">Views</span>\n          <span class=\"info-value\">${views}</span>\n        </div>\n        <div class=\"info-item\">\n          <span class=\"info-label\">Comments</span>\n          <span class=\"info-value\">${comments}</span>\n        </div>\n        <div class=\"info-item\">\n          <span class=\"info-label\">Downloads</span>\n          <span class=\"info-value\">${downloads}</span>\n        </div>\n      </div>\n    </li>\n  `;\n};\n\n/**\n * Отображает галерею изображений\n * @param {Array} images - массив объектов изображений\n * @param {HTMLElement} galleryElement - элемент галереи в DOM\n */\nexport const renderGallery = (images, galleryElement) => {\n  const markup = images.map((image) => createImageCard(image)).join('');\n  galleryElement.innerHTML = markup;\n\n  // Инициализируем или обновляем SimpleLightbox\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery-link', {\n      captions: true,\n      captionsData: 'alt',\n      docClose: true,\n      scrollZoom: true,\n    });\n  }\n};\n\n/**\n * Очищает содержимое галереи\n * @param {HTMLElement} galleryElement - элемент галереи в DOM\n */\nexport const clearGallery = (galleryElement) => {\n  galleryElement.innerHTML = '';\n};\n\n/**\n * Показывает индикатор загрузки\n * @param {HTMLElement} loaderElement - элемент индикатора загрузки\n */\nexport const showLoader = (loaderElement) => {\n  loaderElement.style.display = 'block';\n};\n\n/**\n * Скрывает индикатор загрузки\n * @param {HTMLElement} loaderElement - элемент индикатора загрузки\n */\nexport const hideLoader = (loaderElement) => {\n  loaderElement.style.display = 'none';\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { searchImages } from './js/pixabay-api';\nimport { renderGallery, clearGallery, showLoader, hideLoader } from './js/render-functions';\n\n// Элементы DOM\nconst searchForm = document.querySelector('.search-form');\nconst galleryElement = document.querySelector('.gallery');\nconst loaderElement = document.querySelector('.loader');\n\n/**\n * Обработчик события отправки формы поиска\n */\nconst handleFormSubmit = async (event) => {\n  event.preventDefault();\n\n  const searchInput = searchForm.querySelector('input[name=\"searchQuery\"]');\n  const query = searchInput.value.trim();\n\n  // Проверка на пустую строку\n  if (!query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search query',\n      position: 'topRight',\n      timeout: 3000,\n    });\n    return;\n  }\n\n  // Очищаем галерею и показываем загрузчик\n  clearGallery(galleryElement);\n  showLoader(loaderElement);\n\n  try {\n    // Выполняем поиск\n    const data = await searchImages(query);\n\n    // Скрываем загрузчик\n    hideLoader(loaderElement);\n\n    // Проверяем результаты\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'No Results',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        timeout: 4000,\n      });\n      searchInput.value = '';\n      return;\n    }\n\n    // Отображаем галерею\n    renderGallery(data.hits, galleryElement);\n    searchInput.value = '';\n  } catch (error) {\n    hideLoader(loaderElement);\n    console.error('Error:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to fetch images. Please try again!',\n      position: 'topRight',\n      timeout: 4000,\n    });\n  }\n};\n\n// Подключаем обработчик события\nsearchForm.addEventListener('submit', handleFormSubmit);\n"],"names":["API_KEY","BASE_URL","searchImages","query","params","response","error","lightbox","createImageCard","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderGallery","images","galleryElement","markup","SimpleLightbox","clearGallery","showLoader","loaderElement","hideLoader","searchForm","handleFormSubmit","event","searchInput","iziToast","data"],"mappings":"4xBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAOJC,EAAe,MAAOC,GAAU,CAC3C,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKJ,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EAED,GAAI,CACF,MAAME,EAAW,MAAM,MAAM,GAAGJ,CAAQ,IAAIG,CAAM,EAAE,EAEpD,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAI1D,OADa,MAAMA,EAAS,MAE7B,OAAQC,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,EC3BA,IAAIC,EAAW,KAOf,MAAMC,EAAmBC,GAAU,CACjC,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EAEJ,MAAO;AAAA;AAAA,sCAE6BE,CAAa;AAAA;AAAA;AAAA,iBAGlCD,CAAY;AAAA,iBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAOgBC,CAAK;AAAA;AAAA;AAAA;AAAA,qCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,qCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,qCAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,GAK9C,EAOaC,EAAgB,CAACC,EAAQC,IAAmB,CACvD,MAAMC,EAASF,EAAO,IAAKT,GAAUD,EAAgBC,CAAK,CAAC,EAAE,KAAK,EAAE,EACpEU,EAAe,UAAYC,EAGvBb,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIc,EAAe,gBAAiB,CAC7C,SAAU,GACV,aAAc,MACd,SAAU,GACV,WAAY,EAClB,CAAK,CAEL,EAMaC,EAAgBH,GAAmB,CAC9CA,EAAe,UAAY,EAC7B,EAMaI,EAAcC,GAAkB,CAC3CA,EAAc,MAAM,QAAU,OAChC,EAMaC,EAAcD,GAAkB,CAC3CA,EAAc,MAAM,QAAU,MAChC,EC3FME,EAAa,SAAS,cAAc,cAAc,EAClDP,EAAiB,SAAS,cAAc,UAAU,EAClDK,EAAgB,SAAS,cAAc,SAAS,EAKhDG,EAAmB,MAAOC,GAAU,CACxCA,EAAM,eAAc,EAEpB,MAAMC,EAAcH,EAAW,cAAc,2BAA2B,EAClEvB,EAAQ0B,EAAY,MAAM,KAAI,EAGpC,GAAI,CAAC1B,EAAO,CACV2B,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,8BACT,SAAU,WACV,QAAS,GACf,CAAK,EACD,MACD,CAGDR,EAAaH,CAAc,EAC3BI,EAAWC,CAAa,EAExB,GAAI,CAEF,MAAMO,EAAO,MAAM7B,EAAaC,CAAK,EAMrC,GAHAsB,EAAWD,CAAa,EAGpBO,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,MAAM,CACb,MAAO,aACP,QACE,2EACF,SAAU,WACV,QAAS,GACjB,CAAO,EACDD,EAAY,MAAQ,GACpB,MACD,CAGDZ,EAAcc,EAAK,KAAMZ,CAAc,EACvCU,EAAY,MAAQ,EACrB,OAAQvB,EAAO,CACdmB,EAAWD,CAAa,EACxB,QAAQ,MAAM,SAAUlB,CAAK,EAC7BwB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,4CACT,SAAU,WACV,QAAS,GACf,CAAK,CACF,CACH,EAGAJ,EAAW,iBAAiB,SAAUC,CAAgB"}